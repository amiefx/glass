(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{107:function(t,e,a){var r=a(216);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(8)(r,n);r.locals&&(t.exports=r.locals)},108:function(t,e,a){var r=a(218);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(8)(r,n);r.locals&&(t.exports=r.locals)},215:function(t,e,a){"use strict";a(107)},216:function(t,e,a){(t.exports=a(7)(!1)).push([t.i,".pointer[data-v-548c8545]{cursor:pointer}",""])},217:function(t,e,a){"use strict";a(108)},218:function(t,e,a){(t.exports=a(7)(!1)).push([t.i,".numinput{border:1px solid #d3d3d3;border-radius:5px;padding:3px 3px 3px 10px;margin-top:5px;margin-bottom:5px}.numinput:focus{border:1px solid #d3d3d3}.qty{width:60px}.sel{width:100px}select.minimal{background-image:linear-gradient(45deg,transparent 50%,grey 0),linear-gradient(135deg,grey 50%,transparent 0),linear-gradient(90deg,#ccc,#ccc);background-position:calc(100% - 20px) calc(1em + 2px),calc(100% - 15px) calc(1em + 2px),calc(100% - 2.5em) .5em;width:100px}select.minimal,select.minimal:focus{background-size:5px 5px,5px 5px,1px 1.5em;background-repeat:no-repeat}select.minimal:focus{background-image:linear-gradient(45deg,green 50%,transparent 0),linear-gradient(135deg,transparent 50%,green 0),linear-gradient(90deg,#ccc,#ccc);background-position:calc(100% - 15px) 1em,calc(100% - 20px) 1em,calc(100% - 2.5em) .5em;border-color:green;outline:0}",""])},343:function(t,e,a){"use strict";a.r(e);var r=a(22),n={props:{products:{required:!0,type:Array}},data:function(){return{search:"",headers:[{text:"SKU",align:"start",sortable:!0,value:"sku"},{text:"Price",value:"selling_price"},{text:"Quantity",value:"onhand"}]}},methods:{editItem:function(t){},addToPurchase:function(t){var e=this.products.indexOf(t);this.$store.dispatch("purchase/addProductToPurchase",{product:this.products[e],quantity:1})},getColor:function(t){return t?"red":"green"}}},i=(a(215),a(4)),s=a(5),o=a.n(s),c=a(86),u=a(1),l=a(91),d=a(341),p=a(326),m=a(45),v=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:t.products,search:t.search},scopedSlots:t._u([{key:"item.sku",fn:function(e){var r=e.item;return[a("span",{staticClass:"pointer",on:{click:function(e){return t.addToPurchase(r)}}},[t._v("\n        "+t._s(r.sku)+"\n      ")])]}},{key:"item.onhand",fn:function(e){var r=e.item;return[a("v-edit-dialog",{attrs:{block:"",persistent:"","return-value":r.onhand},on:{"update:returnValue":function(e){return t.$set(r,"onhand",e)},"update:return-value":function(e){return t.$set(r,"onhand",e)}}},[a("v-chip",{attrs:{color:t.getColor(r.alert),dark:""}},[t._v("\n          "+t._s(r.onhand)+"\n        ")])],1)]}}])})],1)}),[],!1,null,"548c8545",null),h=v.exports;function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){g(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function g(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}o()(v,{VCard:c.a,VCardTitle:u.c,VChip:l.a,VDataTable:d.a,VEditDialog:p.a,VTextField:m.a});var b={components:{PurchaseList:h},data:function(){return{snackbar:!1,text:"",loading:!1,valid:!0,dialog:!1,dialog2:!1,discount:null,products:[],isLoading:!1,items:[],model:null,search:null,tab:null,balance:null,pmt_methods:["Cash","Bank"],supplier_id:"",purchaseData:{supplier_id:"",subtotal:"",discount:"",total:"",paid_amt:"",payable_amt:"",pmt_method:""}}},created:function(){this.initialize()},methods:{removeProductFromPurchase:function(t){this.$store.dispatch("purchase/removeProductFromPurchase",t)},clearPurchaseItems:function(){this.$store.dispatch("purchase/clearPurchaseItems")},decreaseProductQty:function(t){this.$store.dispatch("purchase/decreaseProductQty",t)},increaseProductQty:function(t){this.$store.dispatch("purchase/increaseProductQty",t)},saveOrder:function(){var t=this,e={orderDetails:{supplier_id:this.model,subtotal:this.purchaseTotalPrice,discount:this.purchaseData.discount,total:this.total,paid_amt:this.purchaseData.paid_amt,payable_amt:this.amtDue,pmt_method:this.purchaseData.pmt_method,note:""},orderedItems:this.purchase};axios.interceptors.request.use((function(e){return t.loading=!0,e}),(function(e){return t.loading=!1,Promise.reject(e)})),axios.interceptors.response.use((function(e){return t.loading=!1,e}),(function(e){return t.loading=!1,Promise.reject(e)})),axios.post("/api/purchaseorder",e).then((function(a){t.clearPurchaseItems(),console.log(e),t.model=null,t.purchaseData.discount=null,t.purchaseData.paid_amt=null,t.purchaseData.pmt_method=null,t.initialize()}))},initialize:function(){var t=this;axios.interceptors.request.use((function(e){return t.loading=!0,e}),(function(e){return t.loading=!1,Promise.reject(e)})),axios.interceptors.response.use((function(e){return t.loading=!1,e}),(function(e){return t.loading=!1,Promise.reject(e)})),axios.get("/api/products/all").then((function(e){t.products=e.data.data}))}},computed:f(f({},Object(r.d)({purchase:function(t){return t.purchase.purchase}})),{},{purchaseItemCount:function(){return this.$store.getters["purchase/purchaseItemCount"]},purchaseTotalPrice:function(){return this.$store.getters["purchase/purchaseTotalPrice"]},total:function(){return this.purchaseTotalPrice-this.purchaseData.discount},amtDue:function(){return this.total-this.purchaseData.paid_amt}}),watch:{model:function(t){var e=this;this.items.forEach((function(a){t==a.id&&(e.balance=a.payables)}))},search:function(t){var e=this;this.items.length>0||(this.isLoading=!0,axios.get("/api/suppliers/all").then((function(t){e.items=t.data.data,e.isLoading=!1})).catch((function(t){console.log(t),e.isLoading=!1})))}}},x=(a(217),a(328)),y=a(72),P=a(322),C=a(88),k=a(67),w=a(74),D=a(95),O=a(96),V=a(13),j=a(323),I=a(99),T=Object(i.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"7"}},[a("v-autocomplete",{attrs:{items:t.items,loading:t.isLoading,"search-input":t.search,chips:"",clearable:"","hide-details":"","hide-selected":"","item-text":"name","item-value":"id",label:"Search for a supplier...",solo:""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[a("v-list-item",[a("v-list-item-title",[t._v("\n          Search for a\n          "),a("strong",[t._v("Supplier")])])],1)]},proxy:!0},{key:"selection",fn:function(e){var r=e.attr,n=e.on,i=e.item,s=e.selected;return[a("v-chip",t._g(t._b({staticClass:"white--text",attrs:{"input-value":s,color:"blue-grey"}},"v-chip",r,!1),n),[a("v-icon",{attrs:{left:""}},[t._v("\n          mdi-account\n        ")]),t._v(" "),a("span",{domProps:{textContent:t._s(i.name)}})],1)]}},{key:"item",fn:function(e){var r=e.item;return[a("v-list-item-avatar",{staticClass:"headline font-weight-light white--text",attrs:{color:"indigo"}},[a("v-icon",{staticClass:"white--text"},[t._v("mdi-account")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(r.name)}}),t._v(" "),a("v-list-item-subtitle",[t._v(" "+t._s(r.company_name)+" | "+t._s(r.work_number)+" ")])],1),t._v(" "),a("v-list-item-action",[r.credit_limit>0?a("span",[t._v("\n            Credit limit:\n        "),a("strong",[t._v("\n          "+t._s(r.credit_limit)+"\n        ")])]):t._e(),t._v(" "),a("span",[t._v("\n            Payable:\n        "),a("strong",[t._v("\n          "+t._s(r.payables)+"\n        ")])])])]}}]),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t._v(" "),a("v-divider"),t._v(" "),a("v-simple-table",{attrs:{height:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{staticClass:"text-left"},[t._v(" Sku ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v(" Price ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v(" Qty ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v(" Total ")]),t._v(" "),a("th",{staticClass:"text-left"})])]),t._v(" "),a("tbody",t._l(t.purchase,(function(e){return a("tr",{key:e.id},[a("td",[a("v-btn",{staticClass:"red--text",attrs:{icon:""},on:{click:function(a){return t.removeProductFromPurchase(e.product)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1),t._v(" "),a("td",[t._v("\n                "+t._s(e.product.sku)+"\n              ")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.product.purchase_price,expression:"item.product.purchase_price"}],staticClass:"numinput qty",attrs:{type:"number"},domProps:{value:e.product.purchase_price},on:{input:function(a){a.target.composing||t.$set(e.product,"purchase_price",a.target.value)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],staticClass:"numinput qty",attrs:{type:"number"},domProps:{value:e.quantity},on:{input:function(a){a.target.composing||t.$set(e,"quantity",a.target.value)}}})]),t._v(" "),a("td",{attrs:{allign:"right"}},[e.product.purchase_price?a("span",[t._v("\n                      "+t._s((e.product.purchase_price*e.quantity).toFixed(0))+"\n                  ")]):a("span",[t._v("\n                      "+t._s((0*e.quantity).toFixed(0))+"\n                  ")])]),t._v(" "),a("td",[a("v-btn",{staticClass:"green--text",attrs:{icon:""},on:{click:function(a){return t.increaseProductQty(e.product)}}},[a("v-icon",[t._v("mdi-plus")])],1),t._v(" "),e.quantity>1?a("v-btn",{staticClass:"red--text",attrs:{icon:""},on:{click:function(a){return t.decreaseProductQty(e.product)}}},[a("v-icon",[t._v("mdi-minus")])],1):t._e()],1)])})),0)]},proxy:!0}])}),t._v(" "),a("v-divider"),t._v(" "),a("v-simple-table",{attrs:{dense:""}},[a("tbody",[a("tr",[a("td",{attrs:{width:"50%"}}),t._v(" "),a("td",{attrs:{width:"25%"}},[t._v("Subtotal")]),t._v(" "),a("td",{attrs:{width:"25%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseTotalPrice,expression:"purchaseTotalPrice"}],staticClass:"numinput",domProps:{value:t.purchaseTotalPrice},on:{input:function(e){e.target.composing||(t.purchaseTotalPrice=e.target.value)}}})])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("Discount")]),t._v(" "),a("td",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseData.discount,expression:"purchaseData.discount"}],staticClass:"numinput",attrs:{type:"number"},domProps:{value:t.purchaseData.discount},on:{input:function(e){e.target.composing||t.$set(t.purchaseData,"discount",e.target.value)}}})])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("Total")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.total,expression:"total"}],staticClass:"numinput",attrs:{disabled:"",type:"number"},domProps:{value:t.total},on:{input:function(e){e.target.composing||(t.total=e.target.value)}}})])]),t._v(" "),a("tr",[a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.purchaseData.pmt_method,expression:"purchaseData.pmt_method"}],staticClass:"minimal numinput",attrs:{name:"",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.purchaseData,"pmt_method",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Cash"}},[t._v("Cash")]),t._v(" "),a("option",{attrs:{value:"Bank"}},[t._v("Bank")])])]),t._v(" "),a("td",[t._v("Amount Paid")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseData.paid_amt,expression:"purchaseData.paid_amt"}],staticClass:"numinput",attrs:{type:"number"},domProps:{value:t.purchaseData.paid_amt},on:{input:function(e){e.target.composing||t.$set(t.purchaseData,"paid_amt",e.target.value)}}})])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("Amount Due")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amtDue,expression:"amtDue"}],staticClass:"numinput",attrs:{disabled:"",type:"number"},domProps:{value:t.amtDue},on:{input:function(e){e.target.composing||(t.amtDue=e.target.value)}}})])])])]),t._v(" "),a("v-row",{staticClass:"mx-5"},[a("v-col",[a("v-btn",{staticClass:"float-left",attrs:{color:"error"},on:{click:t.clearPurchaseItems}},[t._v("Clear all")]),t._v(" "),a("v-btn",{staticClass:"float-right",attrs:{color:"primary",loading:t.loading},on:{click:t.saveOrder}},[t._v("Save")])],1)],1)],1),t._v(" "),a("v-col",{attrs:{cols:"5"}},[a("purchase-list",{attrs:{products:t.products}})],1)],1)],1)}),[],!1,null,null,null);e.default=T.exports;o()(T,{VAutocomplete:x.a,VBtn:y.a,VChip:l.a,VCol:P.a,VDivider:C.a,VIcon:k.a,VListItem:w.a,VListItemAction:D.a,VListItemAvatar:O.a,VListItemContent:V.a,VListItemSubtitle:V.b,VListItemTitle:V.c,VRow:j.a,VSimpleTable:I.a})}}]);