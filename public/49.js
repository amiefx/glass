(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{359:function(e,t,a){"use strict";a.r(t);var i={layout:"admin",middleware:["auth","admin"],data:function(){return{valid:!0,dialog:!1,loading:!1,snackbar:!1,text:"",success:"",error:"",expenseitems:[],options:{sortBy:["id"],sortDesc:[!0]},menu:!1,modal:!1,menu2:!1,rules:{required:function(e){return!!e||"This Field is Required"},min:function(e){return e.length>=5||"Minimum 5 Chracters Required"},validEmail:function(e){return/.+@.+\..+/.test(e)||"Email must be valid"}},headers:[{text:"#",value:"id"},{text:"Expense",value:"expense_item_id"},{text:"Date",value:"date"},{text:"Note",value:"note"},{text:"Payment Method",value:"pmt_method"},{text:"Actions",value:"action",sortable:!1}],status:[{text:"Active",value:!0},{text:"In Active",value:!1}],types:["expense","service provider"],expenses:[],editedIndex:-1,editedItem:{id:"",expense_item_id:"",description:"",date:(new Date).toISOString().substr(0,10),pmt_method:"",details:"",is_active:"",doc_type:"expense payment"},defaultItem:{id:"",expense_item_id:"",description:"",date:(new Date).toISOString().substr(0,10),pmt_method:"",details:"",is_active:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.close()}},created:function(){var e=this;this.initialize(),axios.get("/api/expenseitems/allitems").then((function(t){e.expenseitems=t.data.data}))},methods:{updateStatus:function(e){var t=this,a=this.expenses.data.indexOf(e);axios.post("/api/change-status",{status:e.is_active,expense:e.id}).then((function(e){t.text=e.data.expense.id+"'s Status Updated to "+e.data.expense.is_active,t.snackbar=!0})).catch((function(e){t.expenses.data[a].is_active=e.response.data.expense.is_active,t.snackbar=!0,console.dir(e.response)}))},searchIt:function(e){var t=this;if(e.length>3&&axios.get("/api/expenses/".concat(e)).then((function(e){return t.expenses=e.data.expenses})).catch((function(e){return console.dir(e.response)})),e.length<=0){var a=0==this.options.sortBy.length?"id":this.options.sortBy[0],i=this.options.sortDesc.length>0||this.options.sortDesc[0]?"asc":"desc";axios.get("/api/expenses?page=".concat(e.page),{params:{per_page:e.itemsPerPage,sort_by:a,order_by:i}}).then((function(e){t.expenses=e.data.expenses})).catch((function(e){return console.dir(e.response)}))}},paginate:function(e){var t=this,a=0==this.options.sortBy.length?"id":this.options.sortBy[0],i=this.options.sortDesc.length>0||this.options.sortDesc[0]?"asc":"desc";axios.get("/api/expenses?page=".concat(e.page),{params:{per_page:e.itemsPerPage,sort_by:a,order_by:i}}).then((function(e){t.expenses=e.data.expenses})).catch((function(e){}))},initialize:function(){var e=this;axios.interceptors.request.use((function(t){return e.loading=!0,t}),(function(t){return e.loading=!1,Promise.reject(t)})),axios.interceptors.response.use((function(t){return e.loading=!1,t}),(function(t){return e.loading=!1,Promise.reject(t)}))},editItem:function(e){this.editedIndex=this.expenses.data.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this,a=this.expenses.data.indexOf(e);confirm("Are you sure you want to delete this item?")&&axios.delete("/api/expenses/"+e.id).then((function(e){t.snackbar=!0,t.expenses.data.splice(a,1)})).catch((function(e){console.log(e.response),t.text="Error Deleting Record",t.snackbar=!0}))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){var e=this;if(this.editedIndex>-1){var t=this.editedIndex;axios.put("/api/expenses/"+this.editedItem.id,this.editedItem).then((function(a){console.log(a),e.text="Record Updated Successfully!",e.snackbar=!0,Object.assign(e.expenses.data[t],a.data.expense)})).catch((function(t){console.log(t.response),e.text="Error Updating Record",e.snackbar=!0}))}else axios.post("/api/expenses",this.editedItem).then((function(t){e.text="Record Added Successfully!",e.snackbar=!0,e.expenses.data.push(t.data.expense)})).catch((function(t){console.dir(t),e.text="Error Inserting Record",e.snackbar=!0}));this.close()},getColor:function(e){return 0==e?"red":"green"}}},n=a(4),s=a(5),o=a.n(s),r=a(72),d=a(86),c=a(1),l=a(322),u=a(384),p=a(341),m=a(338),v=a(327),x=a(88),f=a(324),h=a(67),_=a(92),b=a(329),g=a(330),I=a(323),k=a(26),y=a(325),V=a(383),w=a(45),C=a(36),D=a(15),S=Object(n.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.expenses.data,"items-per-page":5,"item-key":"id",loading:e.loading,options:e.options,"server-items-length":e.expenses.total,"loading-text":"Loading.. Please Wait!","footer-props":{itemsPerPageOptions:[5,10,15],"show-current-page":!0,"show-first-last-page":!0}},on:{pagination:e.paginate,"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:""}},[a("v-toolbar-title",[e._v("Expenses")]),e._v(" "),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),a("v-spacer"),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},i),[e._v("New Expense")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),a("v-form",{attrs:{method:"post"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.save(t)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"For the Date/Month of:","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.editedItem.date,callback:function(t){e.$set(e.editedItem,"date",t)},expression:"editedItem.date"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[e._v(" "),a("v-date-picker",{on:{input:function(t){e.menu2=!1}},model:{value:e.editedItem.date,callback:function(t){e.$set(e.editedItem,"date",t)},expression:"editedItem.date"}})],1),e._v(" "),a("v-select",{attrs:{items:e.expenseitems,"item-text":"name","item-value":"id",label:"Expenses",rules:[e.rules.required]},model:{value:e.editedItem.expense_item_id,callback:function(t){e.$set(e.editedItem,"expense_item_id",t)},expression:"editedItem.expense_item_id"}}),e._v(" "),a("v-text-field",{attrs:{label:"Amount",rules:[e.rules.required],type:"number"},model:{value:e.editedItem.total,callback:function(t){e.$set(e.editedItem,"total",t)},expression:"editedItem.total"}}),e._v(" "),a("v-radio-group",{staticClass:"radio mt-1",attrs:{mandatory:"",row:""},model:{value:e.editedItem.pmt_method,callback:function(t){e.$set(e.editedItem,"pmt_method",t)},expression:"editedItem.pmt_method"}},[a("v-radio",{attrs:{label:"Cash",value:"Cash"}}),e._v(" "),a("v-radio",{attrs:{label:"Bank",value:"Bank"}})],1),e._v(" "),"Bank"==e.editedItem.pmt_method?a("v-text-field",{attrs:{label:"Detials"},model:{value:e.editedItem.details,callback:function(t){e.$set(e.editedItem,"details",t)},expression:"editedItem.details"}}):e._e(),e._v(" "),a("v-text-field",{attrs:{label:"Notes"},model:{value:e.editedItem.note,callback:function(t){e.$set(e.editedItem,"note",t)},expression:"editedItem.note"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"primary",type:"submit",disabled:!e.valid},on:{click:function(t){return t.preventDefault(),e.save(t)}}},[e._v("Save")])],1)],1)],1)],1)],1),e._v(" "),a("v-text-field",{staticClass:"mx-4",attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},on:{input:e.searchIt}})]},proxy:!0},{key:"item.action",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),e._v(" "),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])}),e._v(" "),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.text)+"\n    "),a("v-btn",{attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)}),[],!1,null,null,null);t.default=S.exports;o()(S,{VBtn:r.a,VCard:d.a,VCardActions:c.a,VCardText:c.b,VCardTitle:c.c,VCol:l.a,VContainer:u.a,VDataTable:p.a,VDatePicker:m.a,VDialog:v.a,VDivider:x.a,VForm:f.a,VIcon:h.a,VMenu:_.a,VRadio:b.a,VRadioGroup:g.a,VRow:I.a,VSelect:k.a,VSnackbar:y.a,VSpacer:V.a,VTextField:w.a,VToolbar:C.a,VToolbarTitle:D.a})}}]);